<!DOCTYPE html>
<html lang="zh-Hans">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="This is Sunning&#39;s first Blog">
    

    <!--Author-->
    
        <meta name="author" content="Sunning">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="gulp自动化（1）—— 环境搭建"/>
    

    <!--Open Graph Description-->
    
        <meta property="og:description" content="This is Sunning&#39;s first Blog" />
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="Sunning&#39;s Home"/>

    <!--Type page-->
    
        <meta property="og:type" content="article" />
    

    <!--Page Cover-->
    

        <meta name="twitter:card" content="summary" />
    

    <!-- Title -->
    
    <title>gulp自动化（1）—— 环境搭建 - Sunning&#39;s Home</title>

    <!-- Bootstrap Core CSS -->
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet"/>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet" />
	
    <!-- Google Analytics -->
    

	
    <!-- favicon -->
    
    <link rel="icon" href="Sunning">
    
</head>


<body>

    <!-- Menu -->
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">To My Heart</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                
                    <li>
                        <a href="/">
                            
                                首页
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="/archives">
                            
                                归档
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="/tags">
                            
                                标签
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="/tags/IT">
                            
                                IT类
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="/categories">
                            
                                分类
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="https://github.com/sunningoo/">
                            
                                <i class="fa fa-github fa-stack-2x"></i>
                            
                        </a>
                    </li>
                
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>

    <!-- Main Content -->
    <!-- Page Header -->
<!-- Set your background image for this header in your post front-matter: cover -->

<header class="intro-header" style="background-image: url('http://www.codeblocq.com/assets/projects/hexo-theme-clean-blog/img/home-bg.jpg')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>gulp自动化（1）—— 环境搭建</h1>
                    
                    <span class="meta">
                        <!-- Date and Author -->
                        
                        
                            2017-08-04
                        
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

            <!-- Tags and categories -->
           
                <div class="col-lg-4 col-lg-offset-2 col-md-5 col-md-offset-1 post-tags">
                    
                        


<a href="/tags/gulp/">#gulp</a>


                    
                </div>
                <div class="col-lg-4 col-md-5 post-categories">
                    
                </div>
            

            <!-- Gallery -->
            

            <!-- Post Main Content -->
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <h1 id="node-gulp-browser-sync完成前端自动化项目搭建"><a href="#node-gulp-browser-sync完成前端自动化项目搭建" class="headerlink" title="node + gulp + browser-sync完成前端自动化项目搭建"></a>node + gulp + browser-sync完成前端自动化项目搭建</h1><p>作者： <a href="https://github.com/sunningoo/" target="_blank" rel="external">Sunning</a><br>日期： 2017 年 8 月 4 日</p>
<p>前几天正好有时间，所以就利用node + gulp + browser-sync搭建了一套前端的自动化开发。实现了如下的一些小功能：</p>
<blockquote>
<ol>
<li>文件修改后，浏览器的自动刷新</li>
<li>scss文件自动编译为css文件，并生成map文件，添加版本号</li>
<li>js代码检查</li>
<li>html、css、js文件压缩打包</li>
</ol>
</blockquote>
<h2 id="JavaScript代码"><a href="#JavaScript代码" class="headerlink" title="JavaScript代码"></a>JavaScript代码</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * 创建“mathServer”用于两数的乘积</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>);</div><div class="line"><span class="keyword">const</span> hostname = <span class="string">'127.0.0.1'</span>;</div><div class="line"><span class="keyword">const</span> port = <span class="number">3000</span>;</div><div class="line"><span class="keyword">const</span> server = http.createServer(<span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</div><div class="line">	res.statusCode = <span class="number">200</span>;</div><div class="line">	res.setHeader(<span class="string">'Content-Type'</span>, <span class="string">'text/plain'</span>);</div><div class="line">	res.end(<span class="string">'Hello World\nhello Demo'</span>);</div><div class="line">&#125;);</div><div class="line">server.listen(port, hostname, () =&gt; &#123;</div><div class="line">	<span class="built_in">console</span>.log(<span class="string">'服务器运行在 http://#&#123;hostname&#125;:#&#123;port&#125;/'</span>);</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * 测试demo</span></div><div class="line"><span class="comment"> * @param &#123;Object&#125; value</span></div><div class="line"><span class="comment"> * @param &#123;Object&#125; number</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">value, number</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span>(value == <span class="string">"20"</span>)&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"success"</span>);</div><div class="line">    &#125;<span class="keyword">else</span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(test);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">test(<span class="string">"20"</span>,<span class="number">10</span>);</div></pre></td></tr></table></figure>
<h3 id="javascript代码测试"><a href="#javascript代码测试" class="headerlink" title="javascript代码测试"></a>javascript代码测试</h3><p>是范德萨发</p>
<h3 id="javascript代码测试2"><a href="#javascript代码测试2" class="headerlink" title="javascript代码测试2"></a>javascript代码测试2</h3><p>是范德萨发8855</p>
<h2 id="HTML代码"><a href="#HTML代码" class="headerlink" title="HTML代码"></a>HTML代码</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">ng-app</span>=<span class="string">"indexApp"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"initial-scale=1.0, maximum-scale=1.0, user-scalable=no"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!--html文件引用增加版本号时，需要在html文件引用路径中增加 ?rev=@@hash 方可在编译时，自动添加版本号--&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">href</span>=<span class="string">"css/page.css?rev=@@hash"</span>/&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">ng-controller</span>=<span class="string">"indexCtrl"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">h2</span>&gt;</span>AngularJS-Factory的简单应用<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">label</span>&gt;</span>请输入一个数字：<span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"number"</span> <span class="attr">ng-model</span>=<span class="string">"number"</span> /&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">button</span> <span class="attr">ng-click</span>=<span class="string">"square()"</span>&gt;</span>X<span class="tag">&lt;<span class="name">sup</span>&gt;</span>2<span class="tag">&lt;/<span class="name">sup</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">p</span>&gt;</span>结果：&#123;&#123;result&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-view</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"lib/angular/angular.js"</span> &gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"lib/angular/angular-route.js"</span> &gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/common/variable.js"</span> &gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/common/factory.js"</span> &gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/common/service.js"</span> &gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/index.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="css代码"><a href="#css代码" class="headerlink" title="css代码"></a>css代码</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">@<span class="keyword">charset</span> <span class="string">"UTF-8"</span>;</div><div class="line"></div><div class="line"><span class="comment">/** author: Sunning;description: this is a reset css;*/</span></div><div class="line"><span class="comment">/*全局样式*/</span></div><div class="line">* &#123;<span class="attribute">margin</span>: <span class="number">0</span>;<span class="attribute">padding</span>: <span class="number">0</span>;&#125;</div><div class="line"><span class="selector-tag">html</span>,</div><div class="line"><span class="selector-tag">body</span> &#123;<span class="attribute">width</span>: <span class="number">100%</span>;<span class="attribute">height</span>: <span class="number">100%</span>;<span class="attribute">overflow</span>: hidden;&#125;</div><div class="line"><span class="selector-tag">body</span> &#123;<span class="attribute">font-family</span>: <span class="string">"microsoft yahei"</span>;<span class="attribute">font-size</span>: <span class="number">14px</span>;&#125;</div><div class="line"><span class="selector-tag">a</span> &#123;<span class="attribute">text-decoration</span>: none;<span class="attribute">color</span>: <span class="number">#333</span>;&#125;</div><div class="line"><span class="selector-tag">input</span>,</div><div class="line"><span class="selector-tag">textarea</span>,</div><div class="line"><span class="selector-tag">button</span> &#123;<span class="attribute">outline</span>: <span class="number">0</span>;<span class="attribute">border</span>: <span class="number">0</span>;&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.row</span> &#123;<span class="attribute">height</span>: <span class="number">60px</span>;<span class="attribute">line-height</span>: <span class="number">60px</span>;<span class="attribute">margin-left</span>: <span class="number">50px</span>;&#125;</div><div class="line"><span class="selector-class">.row</span> <span class="selector-tag">label</span> &#123;<span class="attribute">color</span>: <span class="number">#666</span>;&#125;</div><div class="line"><span class="selector-class">.row</span> <span class="selector-tag">input</span> &#123;<span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">15px</span>;<span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#999</span>;<span class="attribute">font-size</span>: <span class="number">16px</span>;<span class="attribute">-webkit-border-radius</span>: <span class="number">6px</span>;<span class="attribute">-moz-border-radius</span>: <span class="number">6px</span>;<span class="attribute">-ms-border-radius</span>: <span class="number">6px</span>;<span class="attribute">border-radius</span>: <span class="number">6px</span>;&#125;</div><div class="line"><span class="selector-class">.row</span> <span class="selector-tag">button</span> &#123;<span class="attribute">width</span>: <span class="number">300px</span>;<span class="attribute">height</span>: <span class="number">40px</span>;<span class="attribute">background</span>: lightgreen;<span class="attribute">color</span>: white;<span class="attribute">-webkit-border-radius</span>: <span class="number">6px</span>;<span class="attribute">-moz-border-radius</span>: <span class="number">6px</span>;<span class="attribute">-ms-border-radius</span>: <span class="number">6px</span>;<span class="attribute">border-radius</span>: <span class="number">6px</span>;&#125;</div><div class="line"><span class="selector-class">.row</span> <span class="selector-tag">button</span><span class="selector-pseudo">:hover</span> &#123;<span class="attribute">opacity</span>: .<span class="number">9</span>;&#125;</div><div class="line"><span class="selector-class">.row</span> <span class="selector-tag">p</span> &#123;<span class="attribute">color</span>: <span class="number">#333</span>;<span class="attribute">font-size</span>: <span class="number">16px</span>;<span class="attribute">line-height</span>: <span class="number">30px</span>;&#125;</div><div class="line"><span class="selector-class">.row</span> <span class="selector-tag">span</span> &#123;<span class="attribute">color</span>: red;&#125;</div></pre></td></tr></table></figure>


                
            </div>

            <!-- Comments -->
            
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    


                </div>
            
        </div>
    </div>
</article>

    <!-- Footer -->
    <hr />

<!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    

                    

                    
                        <li>
                            <a href="https://github.com/sunningoo/" target="_blank">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                    

                    

                    

                    
                </ul>
                <p class="copyright text-muted">&copy; 2017 Sunning<br></p>
                <p class="copyright text-muted">联系方式： <a target="_blank" href="https://github.com/Sunningoo/">GitHub</a></p>
                <p class="copyright text-muted">友情链接： <a target="_blank" href="https://souldjl.github.io/">代久龙 </a></p>
            </div>
        </div>
    </div>
</footer>


    <!-- After footer scripts -->
    
<!-- jQuery -->
<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

<!-- Bootstrap -->
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

<!-- Gallery -->
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- article-catalog-->
<script type="text/javascript">
	/*文章目录设置*/
//是否展开导航栏
//var expandNavBar = true;
alert("a");
var metaMessage = document.querySelector('meta[property="og:type"]').getAttribute('content');
if(metaMessage == "article"){//判断是否为非首页
    $(window).scroll(function(){
        var containerHeight = $(".container").height() + 50;
        var h=$(this).scrollTop();//获得滚动条距top的高度
        if(h > containerHeight){
            $(".BlogAnchor").css({
                "position": "fixed",
                "left": "0",
                "top": "0",
                "bottom": "0"
            });
            $("article .container,footer .container").css("margin-left", "320px");
        }else{
            $(".BlogAnchor").css({
                "position": "relative",
                "float": "left"
            });
            $("article .container,footer .container").css("overflow", "hidden");
        }
    });
    $(document).ready(function(){
        /*H1标签默认为标题，所以不加入到目录中*/
        var h2s = $("body article .container").find("h2");
        var h3s = $("body article .container").find("h3");
        var h4s = $("body article .container").find("h4");
        var h5s = $("body article .container").find("h5");
        var h6s = $("body article .container").find("h6");
    
        var headCounts = [h2s.length, h3s.length, h4s.length, h5s.length, h6s.length];
        var vH2Tag = null;
        var vH3Tag = null;
        for(var i = 0; i < headCounts.length; i++){
            if(headCounts[i] > 0){
                if(vH2Tag == null){
                    vH2Tag = 'h' + (i + 2);
                }else{
                    vH3Tag = 'h' + (i + 2);
                }
            }
        }
        if(vH2Tag == null){
            return;
        }
    
        $("body article").prepend('<div class="BlogAnchor">' + 
            '<p>' + 
                '<b id="AnchorContentToggle" title="收起" style="cursor:pointer;">文章目录</b>' + 
            '</p>' + 
            '<div class="AnchorContent" id="AnchorContent"> </div>' + 
        '</div>' );
    
        var vH1Index = 0;
        var vH2Index = 0;
        $("body article .container").find("h2,h3,h4,h5,h6").each(function(i,item){
            var id = '';
            var name = '';
            var tag = $(item).get(0).tagName.toLowerCase();
            var className = '';
            if(tag == vH2Tag){
                id = name = ++vH1Index;
                name = id;
                vH2Index = 0;
                className = 'item_h2';
            }else if(tag == vH3Tag){
                id = vH1Index + '_' + ++vH2Index;
                name = vH1Index + '.' + vH2Index;
                className = 'item_h3';
            }
            $(item).attr("id","wow"+id);
            $(item).addClass("wow_head");
    //      $("#AnchorContent").css('max-height', ($(window).height() - 180) + 'px');
            $("#AnchorContent").append('<li><a class="nav_item '+className+' anchor-link" onclick="return false;" href="#" link="#wow'+id+'">'+name+". "+$(this).text()+'</a></li>');
        });
    
        $("#AnchorContentToggle").click(function(){
            var text = $(this).html();
//              if(text=="目录▲"){
//                  $(this).html("目录▼");
//                  $(this).attr({"title":"展开"});
//                  $(".BlogAnchor").css("width","0");
////                    $("body").css("padding-left", "0");
//                  $("body").animate({left:"-=320px"},1000);
//              }else{
//                  $(this).html("目录▲");
//                  $(this).attr({"title":"收起"});
//                  $(".BlogAnchor").css("width","320px");
////                    $("body").css("padding-left", "320px");
//                  $("body").animate({left:"+=320px"},1000);
//              }
            $("#AnchorContent").toggle();
        });
        $(".anchor-link").click(function(){
            $("html,body").animate({scrollTop: $($(this).attr("link")).offset().top}, 500);
        });
    
        var headerNavs = $(".BlogAnchor li .nav_item");
        var headerTops = [];
        $(".wow_head").each(function(i, n){
            headerTops.push($(n).offset().top);
        });
        $(window).scroll(function(){
            var scrollTop = $(window).scrollTop();
            $.each(headerTops, function(i, n){
                var distance = n - scrollTop;
                if(distance >= 0){
                    $(".BlogAnchor li .nav_item.current").removeClass('current');
                    $(headerNavs[i]).addClass('current');
                    return false;
                }
            });
        });
    
//      if(!expandNavBar){
//          $(this).html("目录▼");
//          $(this).attr({"title":"展开"});
//          $("#AnchorContent").hide();
//      }
    }); 
}
</script>

<!-- Disqus Comments -->


</body>

</html>